---
/* Skeleton Loading Component - For better perceived performance */
interface Props {
  variant?: 'text' | 'card' | 'circle' | 'rectangle';
  width?: string;
  height?: string;
  class?: string;
}

const {
  variant = 'rectangle',
  width,
  height,
  class: className = ''
} = Astro.props;

const variantStyles = {
  text: 'skeleton--text',
  card: 'skeleton--card',
  circle: 'skeleton--circle',
  rectangle: 'skeleton--rectangle'
};

const skeletonClass = [
  'skeleton',
  variantStyles[variant],
  className
].filter(Boolean).join(' ');

const customStyles = {
  ...(width && { width }),
  ...(height && { height })
};
---

<div class={skeletonClass} style={Object.entries(customStyles).map(([k, v]) => `${k}: ${v}`).join('; ')}></div>

<style>
.skeleton {
  background: linear-gradient(
    90deg,
    color-mix(in oklab, var(--color-bg-soft, #121219) 100%, transparent) 0%,
    color-mix(in oklab, var(--color-bg-soft, #121219) 100%, var(--color-accent-primary, #7A6F5F) 15%) 50%,
    color-mix(in oklab, var(--color-bg-soft, #121219) 100%, transparent) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: var(--radius-md, 12px);
}

.skeleton--text {
  height: 1em;
  width: 100%;
  border-radius: var(--radius-sm, 6px);
}

.skeleton--card {
  height: 200px;
  width: 100%;
  border-radius: var(--radius-xl, 18px);
}

.skeleton--circle {
  width: 40px;
  height: 40px;
  border-radius: 50%;
}

.skeleton--rectangle {
  width: 100%;
  height: 100px;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* Light theme */
:root[data-theme="light"] .skeleton {
  background: linear-gradient(
    90deg,
    #F5F5F5 0%,
    #E8E8E8 50%,
    #F5F5F5 100%
  );
  background-size: 200% 100%;
}

/* Motion safety */
@media (prefers-reduced-motion: reduce) {
  .skeleton {
    animation: none;
  }
}
</style>

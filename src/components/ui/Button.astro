---
/* Base Button Component - Reusable button with variants */
interface Props {
  variant?: 'primary' | 'secondary' | 'ghost' | 'minimal';
  size?: 'sm' | 'md' | 'lg';
  href?: string;
  external?: boolean;
  pill?: boolean;
  class?: string;
  [key: string]: any;
}

const {
  variant = 'primary',
  size = 'md',
  href,
  external = false,
  pill = false,
  class: className = '',
  ...rest
} = Astro.props;

const buttonClasses = [
  'btn',
  `btn--${variant}`,
  `btn--${size}`,
  pill ? 'btn--pill' : '',
  className
].filter(Boolean).join(' ');

const Component = href ? 'a' : 'button';

// Add external link attributes if needed
const externalAttrs = external && href ? {
  target: '_blank',
  rel: 'noopener noreferrer'
} : {};
---

<Component class={buttonClasses} href={href} {...externalAttrs} {...rest}>
  <slot />
</Component>

<style>
/* ===== Base Button Styles ===== */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs, 0.75rem);
  font-family: var(--font-body, 'Helvetica', sans-serif);
  font-weight: var(--font-semibold, 600);
  text-decoration: none;
  border: 1px solid transparent;
  cursor: pointer;
  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1),
              filter 0.2s cubic-bezier(0.4, 0, 0.2, 1),
              background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1),
              border-color 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  white-space: nowrap;
  position: relative;
  overflow: hidden;
}

.btn::before {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at center,
    rgba(255, 255, 255, 0.25),
    transparent 70%
  );
  opacity: 0;
  transform: scale(0);
  transition: transform 0.5s ease, opacity 0.5s ease;
}

.btn:active::before {
  transform: scale(2);
  opacity: 1;
  transition: transform 0s, opacity 0s;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/* ===== Size Variants ===== */
.btn--sm {
  padding: 0.5rem 1rem;
  font-size: var(--text-sm, 0.875rem);
  border-radius: var(--radius-md, 12px);
}

.btn--md {
  padding: 0.75rem 1.5rem;
  font-size: var(--text-base, 1rem);
  border-radius: var(--radius-lg, 16px);
}

.btn--lg {
  padding: 0.9rem 1.8rem;
  font-size: var(--text-md, 1.05rem);
  border-radius: var(--radius-lg, 16px);
}

/* Pill modifier (fully rounded) */
.btn--pill {
  border-radius: var(--radius-full, 9999px);
}

/* ===== Style Variants ===== */

/* Primary - accent background */
.btn--primary {
  background: linear-gradient(135deg,
    var(--color-accent-primary, #7A6F5F),
    color-mix(in oklab, var(--color-accent-primary, #7A6F5F) 85%, #000));
  color: #FFFFFF;
  box-shadow: 0 10px 28px rgba(122, 111, 95, 0.32),
              0 2px 8px rgba(0, 0, 0, 0.15);
}

.btn--primary:hover {
  transform: translateY(-2px) scale(1.02);
  filter: brightness(1.12) saturate(1.1);
  box-shadow: 0 16px 40px rgba(122, 111, 95, 0.45),
              0 8px 16px rgba(0, 0, 0, 0.2);
}

.btn--primary:active {
  transform: translateY(0) scale(1);
}

/* Secondary - subtle background with border */
.btn--secondary {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.14);
  color: #FFFFFF;
  box-shadow: none;
}

.btn--secondary:hover {
  background: rgba(255, 255, 255, 0.14);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.btn--secondary:active {
  transform: translateY(0);
}

/* Ghost - transparent with border */
.btn--ghost {
  background: transparent;
  border-color: color-mix(in oklab, var(--color-text-primary, #FFFFFF) 20%, transparent);
  color: var(--color-text-primary, #FFFFFF);
  box-shadow: none;
}

.btn--ghost:hover {
  background: color-mix(in oklab, var(--color-text-primary, #FFFFFF) 6%, transparent);
  border-color: var(--color-accent-primary, #7A6F5F);
  color: var(--color-accent-primary, #7A6F5F);
}

/* Minimal - no background or border, accent on hover */
.btn--minimal {
  background: transparent;
  border: none;
  color: var(--color-text-secondary, #e8e8ef);
  padding: 0.5rem 1rem;
  box-shadow: none;
}

.btn--minimal:hover {
  color: var(--color-accent-primary, #7A6F5F);
  background: color-mix(in oklab, var(--color-accent-primary, #7A6F5F) 8%, transparent);
}

/* ===== Focus States ===== */
.btn:focus-visible {
  outline: 2px solid var(--color-accent-primary, #7A6F5F);
  outline-offset: 2px;
}

/* ===== Light Theme Adjustments ===== */
:root[data-theme="light"] .btn--primary {
  box-shadow: 0 10px 28px rgba(122, 111, 95, 0.25);
}

:root[data-theme="light"] .btn--secondary {
  background: rgba(0, 0, 0, 0.05);
  border-color: rgba(0, 0, 0, 0.12);
  color: #000000;
}

:root[data-theme="light"] .btn--secondary:hover {
  background: rgba(0, 0, 0, 0.10);
}

:root[data-theme="light"] .btn--ghost {
  border-color: rgba(0, 0, 0, 0.20);
  color: #000000;
}

:root[data-theme="light"] .btn--ghost:hover {
  background: rgba(122, 111, 95, 0.08);
}

:root[data-theme="light"] .btn--minimal {
  color: #333333;
}

/* ===== Motion Safety ===== */
@media (prefers-reduced-motion: reduce) {
  .btn {
    transition: none;
  }

  .btn:hover,
  .btn:active {
    transform: none;
  }
}
</style>
